# ============================================
# CONFIGURACIÓN SSL PARA WORDPRESS
# Solo se activa si existen certificados SSL
# ============================================

# Configuración HTTPS (comentado por defecto)
# Descomenta y configura cuando tengas certificados SSL

# server {
#     listen 443 ssl http2;
#     server_name localhost;
#     
#     root /var/www/html;
#     index index.php index.html index.htm;
#     
#     # ============================================
#     # CONFIGURACIÓN SSL
#     # ============================================
#     
#     ssl_certificate /etc/nginx/ssl/cert.pem;
#     ssl_certificate_key /etc/nginx/ssl/private.key;
#     
#     # Configuración SSL moderna
#     ssl_protocols TLSv1.2 TLSv1.3;
#     ssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384;
#     ssl_ecdh_curve secp384r1;
#     ssl_session_timeout 10m;
#     ssl_session_cache shared:SSL:10m;
#     ssl_session_tickets off;
#     ssl_stapling on;
#     ssl_stapling_verify on;
#     
#     # Headers de seguridad SSL
#     add_header Strict-Transport-Security "max-age=63072000; includeSubDomains; preload";
#     add_header X-Frame-Options "SAMEORIGIN" always;
#     add_header X-Content-Type-Options "nosniff" always;
#     add_header X-XSS-Protection "1; mode=block" always;
#     add_header Referrer-Policy "no-referrer-when-downgrade" always;
#     
#     # Resto de configuración igual que HTTP
#     include /etc/nginx/conf.d/wordpress-common.conf;
# }

# Redirección HTTP a HTTPS (comentado por defecto)
# server {
#     listen 80;
#     server_name localhost;
#     return 301 https://$server_name$request_uri;
# }

# ============================================
# CONFIGURACIÓN PARA GENERAR CERTIFICADOS SSL
# ============================================

# Para generar certificados SSL autofirmados para desarrollo:
# 
# mkdir -p ssl
# 
# openssl req -x509 -nodes -days 365 -newkey rsa:2048 \
#     -keyout ssl/private.key \
#     -out ssl/cert.pem \
#     -subj "/C=ES/ST=Murcia/L=Murcia/O=Desarrollo/OU=IT/CN=localhost"

# Para Let's Encrypt (producción):
# 
# 1. Instalar certbot:
#    sudo apt-get install certbot python3-certbot-nginx
# 
# 2. Obtener certificado:
#    sudo certbot --nginx -d tudominio.com
# 
# 3. Renovación automática:
#    sudo crontab -e
#    0 12 * * * /usr/bin/certbot renew --quiet

# ============================================
# CONFIGURACIÓN DE DEVELOPMENT SSL
# ============================================

# Para desarrollo local con SSL autofirmado:
# 
# 1. Generar certificados:
#    ./generate-ssl.sh
# 
# 2. Descomentar la configuración SSL de arriba
# 
# 3. Reiniciar Nginx:
#    docker compose restart nginx
# 
# 4. Acceder a: https://localhost:8443
#    (Aceptar el certificado autofirmado en el navegador)